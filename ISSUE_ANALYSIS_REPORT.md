# å¤§ä¹é€AIé¢„æµ‹ç³»ç»Ÿ - æ·±åº¦é—®é¢˜åˆ†ææŠ¥å‘Š

> **åˆ†ææ—¥æœŸ**: 2026-01-25
> **ç³»ç»Ÿç‰ˆæœ¬**: v1.0
> **åˆ†æäºº**: Claude Agent

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

ç»è¿‡æ·±å…¥çš„ä»£ç å®¡æŸ¥å’Œæ¶æ„åˆ†æ,æˆ‘ä»¬è¯†åˆ«å‡º**6ä¸ªå…³é”®é—®é¢˜**,è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› ä¸»è¦é›†ä¸­åœ¨**æ•°æ®æŒä¹…åŒ–æ¶æ„**å’Œ**åŠŸèƒ½é›†æˆ**ä¸¤ä¸ªæ–¹é¢ã€‚æœ¬æŠ¥å‘Šæä¾›äº†è¯¦ç»†çš„é—®é¢˜åˆ†æã€æ ¹æœ¬åŸå› è¯†åˆ«å’Œå¯æ‰§è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚

**å…³é”®å‘ç°**:
- âŒ Vercel Serverlessç¯å¢ƒä¸‹`/tmp`ç›®å½•ä¸æŒä¹…åŒ–,å¯¼è‡´ç”¨æˆ·æ•°æ®ä¸¢å¤±
- âŒ è…¾è®¯äº‘COSè™½å·²é›†æˆä½†æœªä½œä¸ºä¸»è¦æ•°æ®æº
- âŒ æ¨æ–‡ç”Ÿæˆç³»ç»Ÿæœªå……åˆ†åˆ©ç”¨AIèƒ½åŠ›
- âœ… æƒé‡æŸ¥çœ‹æ¨¡å—ä»£ç å®Œæ•´,å‰ç«¯é›†æˆæ­£å¸¸
- âœ… MLé¢„æµ‹æœŸå·è®¡ç®—é€»è¾‘æ­£ç¡®

---

## ğŸ” é—®é¢˜è¯¦ç»†åˆ†æ

### é—®é¢˜1: å‰ç«¯é¡µæœ€æ–°ä¸­å¥–æ•°æ®æ²¡æœ‰æ›´æ–°,åå°æ‰‹åŠ¨æ›´æ”¹åä¸èƒ½å­˜å‚¨

#### é—®é¢˜è¡¨ç°
- ç”¨æˆ·åœ¨åå°ç®¡ç†é¡µé¢(`/admin.html`)æ‰‹åŠ¨æ·»åŠ æ–°çš„å¼€å¥–æ•°æ®
- æ•°æ®æ·»åŠ æˆåŠŸçš„æç¤ºå‡ºç°
- åˆ·æ–°å‰ç«¯é¡µé¢å,æ–°æ·»åŠ çš„æ•°æ®æ¶ˆå¤±
- å‰ç«¯æ˜¾ç¤ºçš„ä»ç„¶æ˜¯æ—§æ•°æ®

#### æ ¹æœ¬åŸå› åˆ†æ

**æ–‡ä»¶**: `api/utils/_data_loader.py`

```python
# ç¬¬12è¡Œ - è‡´å‘½é—®é¢˜æ‰€åœ¨
USER_DATA_FILE = '/tmp/user_lottery_data.json'
```

**é—®é¢˜é“¾æ¡**:
1. **æ•°æ®ä¿å­˜ä½ç½®**: ç”¨æˆ·æ·»åŠ çš„æ•°æ®ä¿å­˜åœ¨`/tmp/user_lottery_data.json`
2. **Vercel Serverlessç‰¹æ€§**:
   - æ¯æ¬¡APIè°ƒç”¨éƒ½å¯èƒ½åœ¨ä¸åŒçš„å®¹å™¨ä¸­æ‰§è¡Œ
   - `/tmp`ç›®å½•åœ¨å®¹å™¨é‡å¯åä¼šè¢«æ¸…ç©º
   - æ¯æ¬¡å†·å¯åŠ¨éƒ½ä¼šåˆ›å»ºå…¨æ–°çš„`/tmp`ç›®å½•
3. **æ•°æ®ä¸¢å¤±æµç¨‹**:
   ```
   ç”¨æˆ·æ·»åŠ æ•°æ® â†’ ä¿å­˜åˆ°/tmp/user_lottery_data.json â†’ Serverlesså‡½æ•°ç»“æŸ
   â†’ å®¹å™¨å¯èƒ½è¢«é”€æ¯ â†’ ä¸‹æ¬¡è¯·æ±‚åœ¨æ–°å®¹å™¨ä¸­æ‰§è¡Œ â†’ /tmp/user_lottery_data.jsonä¸å­˜åœ¨
   â†’ åªèƒ½è¯»å–å›ºå®šçš„å†å²æ•°æ®(_lottery_data.py)
   ```

**è¯æ®**:
- `_data_loader.py:15-23` - `load_user_data()`å‡½æ•°å°è¯•ä»`/tmp`è¯»å–
- `_data_loader.py:64-72` - `save_user_data()`å‡½æ•°ä¿å­˜åˆ°`/tmp`
- `admin-data.py:131-147` - åå°æ·»åŠ æ•°æ®è°ƒç”¨`save_user_data()`

**å½“å‰æ•°æ®æµ**:
```
åå°æ·»åŠ æ•°æ® â†’ save_user_data() â†’ /tmp/user_lottery_data.json
                                          â†“ (å®¹å™¨é‡å¯åä¸¢å¤±)
å‰ç«¯è¯·æ±‚æ•°æ® â†’ get_combined_lottery_data() â†’ load_user_data() â†’ è¿”å› []
                                          â†“
                                   åªè¿”å›å›ºå®šæ•°æ®(_lottery_data.py)
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: ä¼˜å…ˆä½¿ç”¨è…¾è®¯äº‘COSä½œä¸ºæ•°æ®æº** (æ¨è)

ä¿®æ”¹æ•°æ®åŠ è½½ä¼˜å…ˆçº§:
```
COSäº‘å­˜å‚¨ > æœ¬åœ°å›ºå®šæ•°æ® > å¤‡ä»½æ•°æ®
```

**æ–¹æ¡ˆ2: é›†æˆVercel KVå­˜å‚¨**

Vercelæä¾›Rediså…¼å®¹çš„KVå­˜å‚¨,å¯ä»¥æŒä¹…åŒ–æ•°æ®ã€‚

---

### é—®é¢˜2: è°ƒç”¨è…¾è®¯äº‘å­˜å‚¨æ¡¶å¤±è´¥,ä¸èƒ½ä¸Šä¼ æ•°æ®åˆ°å†å²æ•°æ®æ–‡ä»¶

#### é—®é¢˜è¡¨ç°
- åå°æ·»åŠ æ•°æ®å,COSä¸Šä¼ å¤±è´¥
- å†å²æ•°æ®æ–‡ä»¶`data/lottery_history.json`æœªæ›´æ–°
- å‰ç«¯æ— æ³•ä»COSè·å–æœ€æ–°æ•°æ®

#### æ ¹æœ¬åŸå› åˆ†æ

**æ–‡ä»¶**: `api/utils/_data_sync.py:98-151`

**COSä¸Šä¼ ä»£ç å·²å®ç°**:
```python
def upload_to_cos(combined_data: List[Dict[str, Any]]) -> bool:
    # æ£€æŸ¥ç¯å¢ƒå˜é‡
    if not all([
        os.getenv('TENCENT_SECRET_ID'),
        os.getenv('TENCENT_SECRET_KEY'),
        os.getenv('TENCENT_COS_BUCKET')
    ]):
        print("âš ï¸  è…¾è®¯äº‘COSæœªé…ç½®,è·³è¿‡ä¸Šä¼ ")
        return False

    # ... ä¸Šä¼ é€»è¾‘
```

**é—®é¢˜ç‚¹**:

1. **ç¯å¢ƒå˜é‡æœªé…ç½®æˆ–é…ç½®é”™è¯¯**
   - éœ€è¦åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­é…ç½®:
     - `TENCENT_SECRET_ID`
     - `TENCENT_SECRET_KEY`
     - `TENCENT_COS_BUCKET`
     - `TENCENT_COS_REGION`

2. **ç½‘ç»œæƒé™é—®é¢˜**
   - Vercel Serverlesså‡½æ•°å¯èƒ½æ— æ³•è®¿é—®è…¾è®¯äº‘COS
   - éœ€è¦æ£€æŸ¥COS bucketçš„CORSé…ç½®

3. **æ•°æ®åŠ è½½ä¼˜å…ˆçº§é—®é¢˜**
   - `api/utils/_cos_data_loader.py` æ–‡ä»¶å­˜åœ¨
   - ä½† `_data_loader.py` æœªä¼˜å…ˆä»COSåŠ è½½

**å½“å‰æ•°æ®åŒæ­¥æµç¨‹** (`admin-data.py:152-177`):
```python
if SYNC_AVAILABLE:
    try:
        combined_data = get_combined_lottery_data()
        sync_result = sync_new_data([new_record], combined_data)  # åŒæ­¥åˆ°æœ¬åœ°+COS
        training_result = trigger_training(combined_data)         # è§¦å‘è®­ç»ƒ
    except Exception as e:
        success_msg += f"\nâš ï¸  è‡ªåŠ¨åŒ–æµç¨‹å¼‚å¸¸: {str(e)}"
```

#### è§£å†³æ–¹æ¡ˆ

**ç«‹å³è¡ŒåŠ¨**:
1. âœ… æ£€æŸ¥Vercelç¯å¢ƒå˜é‡é…ç½®
2. âœ… æµ‹è¯•COSè¿æ¥æ€§
3. âœ… ä¿®æ”¹æ•°æ®åŠ è½½é€»è¾‘,ä¼˜å…ˆä»COSè¯»å–

**é•¿æœŸæ–¹æ¡ˆ**:
- å®ç°æ•°æ®åŒæ­¥æœºåˆ¶: æœ¬åœ° â‡„ COS åŒå‘åŒæ­¥
- æ·»åŠ COSä¸Šä¼ å¤±è´¥é‡è¯•æœºåˆ¶
- å®ç°æ•°æ®ç‰ˆæœ¬æ§åˆ¶

---

### é—®é¢˜3: æ¨æ–‡çš„ç«çŒœæœŸå·ä¸æ˜¯å®æ—¶çš„

#### é—®é¢˜è¡¨ç°
- ç°åœ¨å·²æ›´æ–°åˆ°26010æœŸ
- æ¨æ–‡ä¸­çŒœæµ‹çš„ä»ç„¶æ˜¯26010æœŸæˆ–æ›´æ—©çš„æœŸå·
- åº”è¯¥çŒœæµ‹26011æœŸ

#### æ ¹æœ¬åŸå› åˆ†æ

**æ–‡ä»¶**: `api/generate-tweet.py`

**MLé¢„æµ‹APIæœŸå·è®¡ç®—æ­£ç¡®** (`latest-results.py:676`):
```python
target_period = str(int(latest['period']) + 1) if latest else '25143'
```
è¿™ä¸ªé€»è¾‘æ˜¯æ­£ç¡®çš„,ä¼šè‡ªåŠ¨è®¡ç®—ä¸‹ä¸€æœŸã€‚

**æ¨æ–‡ç”ŸæˆAPIé—®é¢˜** (`generate-tweet.py:72-104`):
```python
def generate(self, data_type: str = 'å¤§ä¹é€', period: int = 260,
             models: str = 'LSTM+XGBoost', template_index: int = 0,
             disclaimer_style: str = 'short') -> dict:
    '''ç”Ÿæˆæ¨æ–‡'''

    template = self.templates[template_index % len(self.templates)]
    disclaimer = DISCLAIMERS.get(disclaimer_style, DISCLAIMERS['short'])

    content = template.format(
        data_type=data_type,
        period=period,  # â† è¿™é‡Œçš„periodæ˜¯å‚æ•°ä¼ å…¥,ä¸æ˜¯å®æ—¶è·å–
        models=models,
        disclaimer=disclaimer
    )
```

**é—®é¢˜**:
- `period`å‚æ•°æ˜¯ç¡¬ç¼–ç ä¼ å…¥çš„(é»˜è®¤260)
- æ²¡æœ‰ä»æœ€æ–°å¼€å¥–æ•°æ®è‡ªåŠ¨è·å–å½“å‰æœŸå·
- æ²¡æœ‰è‡ªåŠ¨+1è®¡ç®—ä¸‹ä¸€æœŸ

**å‰ç«¯è°ƒç”¨** (`index.html:615-693`):
æ¨æ–‡ç”ŸæˆåŠŸèƒ½å­˜åœ¨,ä½†periodå‚æ•°æœªåŠ¨æ€è·å–ã€‚

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: æ¨æ–‡ç”ŸæˆAPIè‡ªåŠ¨è·å–æœ€æ–°æœŸå·**

ä¿®æ”¹`generate-tweet.py`,åœ¨ç”Ÿæˆæ¨æ–‡å‰:
1. è°ƒç”¨`/api/latest-results`è·å–æœ€æ–°æœŸå·
2. è‡ªåŠ¨+1è®¡ç®—ç›®æ ‡æœŸå·
3. åœ¨æ¨æ–‡ä¸­ä½¿ç”¨æ­£ç¡®çš„æœŸå·

**æ–¹æ¡ˆ2: å‰ç«¯ä¼ å…¥æ­£ç¡®æœŸå·**

å‰ç«¯åœ¨è°ƒç”¨æ¨æ–‡ç”ŸæˆAPIæ—¶,ä»`latestData.latest_result.period`è·å–æœ€æ–°æœŸå·å¹¶+1ã€‚

---

### é—®é¢˜4: MLæœºå™¨å­¦ä¹ é’ˆå¯¹æ•°æ®æ˜¯å¦æ˜¯å®æ—¶æ›´æ–°çš„æ•°æ®

#### é—®é¢˜è¡¨ç°
- æ‹…å¿ƒMLæ¨¡å‹ä½¿ç”¨çš„æ˜¯å›ºå®šçš„å†å²æ•°æ®
- ä¸ç¡®å®šæ˜¯å¦åŒ…å«ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ çš„æœ€æ–°æ•°æ®

#### æ ¹æœ¬åŸå› åˆ†æ

**æ–‡ä»¶**: `api/latest-results.py`

**MLé¢„æµ‹æ•°æ®æº** (`latest-results.py:618-634`):
```python
def get_history(self):
    """è·å–å†å²æ•°æ®:ä¼˜å…ˆåˆå¹¶æ•°æ®,ç„¶åKV,æœ€åä½¿ç”¨å¤‡ä»½"""
    # 1. ä¼˜å…ˆä½¿ç”¨åˆå¹¶æ•°æ®(ç”¨æˆ·æ•°æ®+å›ºå®šæ•°æ®)
    combined_data = get_combined_lottery_data()
    if combined_data and len(combined_data) > len(BACKUP_DATA):
        print(f"âœ… ä½¿ç”¨åˆå¹¶æ•°æ®: {len(combined_data)} æœŸ")
        return combined_data

    # 2. å°è¯•ä»KVè·å–
    data = kv_get('lottery_history')
    if data and isinstance(data, list) and len(data) > 0:
        print(f"âœ… ä½¿ç”¨KVæ•°æ®: {len(data)} æœŸ")
        return data

    # 3. å›é€€åˆ°å¤‡ä»½æ•°æ®
    print(f"âš ï¸  ä½¿ç”¨å¤‡ä»½æ•°æ®: {len(BACKUP_DATA)} æœŸ")
    return BACKUP_DATA
```

**MLé¢„æµ‹åˆå§‹åŒ–** (`latest-results.py:670-676`):
```python
if action == 'ml_predict':
    predictor = MLPredictor(history)  # â† historyæ¥è‡ªget_history()
    prediction = predictor.ensemble_predict()
    latest = history[0] if history else None
    target_period = str(int(latest['period']) + 1) if latest else '25143'
```

**é—®é¢˜è¯Šæ–­**:
- âœ… **æ•°æ®æºé€»è¾‘æ­£ç¡®**: MLç¡®å®ä½¿ç”¨`get_combined_lottery_data()`
- âŒ **å®é™…é—®é¢˜**: ç”±äºç”¨æˆ·æ•°æ®ä¿å­˜åœ¨`/tmp`,å®¹å™¨é‡å¯åä¸¢å¤±
- âŒ **ç»“æœ**: MLå®é™…ä¸Šåªä½¿ç”¨å›ºå®šæ•°æ®(`_lottery_data.py`),æ— æ³•è·å–æ‰‹åŠ¨æ·»åŠ çš„æœ€æ–°æ•°æ®

**æ•°æ®æµåˆ†æ**:
```
MLé¢„æµ‹è¯·æ±‚ â†’ get_history() â†’ get_combined_lottery_data()
                                      â†“
                              load_user_data() â†’ /tmp/user_lottery_data.json (ä¸¢å¤±)
                                      â†“
                              è¿”å› [] (ç©ºç”¨æˆ·æ•°æ®)
                                      â†“
                              åªåˆå¹¶å›ºå®šæ•°æ® â†’ _lottery_data.py (æœ€åæ›´æ–°:25135æœŸ)
                                      â†“
                              MLPredictorè®­ç»ƒåœ¨æ—§æ•°æ®ä¸Š
```

#### è§£å†³æ–¹æ¡ˆ

**æ ¸å¿ƒ**: è§£å†³é—®é¢˜1(æ•°æ®æŒä¹…åŒ–)å,æ­¤é—®é¢˜è‡ªåŠ¨è§£å†³

**é¢å¤–ä¼˜åŒ–**:
1. å®ç°COSæ•°æ®ç¼“å­˜æœºåˆ¶
2. å®šæœŸåŒæ­¥æœ€æ–°å¼€å¥–æ•°æ®
3. åœ¨MLé¢„æµ‹å‰å¼ºåˆ¶åˆ·æ–°æ•°æ®

---

### é—®é¢˜5: æƒé‡æŸ¥çœ‹æ¨¡å—æ²¡æœ‰å¯åŠ¨

#### é—®é¢˜è¡¨ç°
- ç”¨æˆ·åé¦ˆæƒé‡æŸ¥çœ‹æ¨¡å—æ— æ³•ä½¿ç”¨
- å¯èƒ½æ˜¯æŒ‰é’®ä¸æ˜¾ç¤ºæˆ–ç‚¹å‡»æ— ååº”

#### æ ¹æœ¬åŸå› åˆ†æ

**å®é™…æƒ…å†µ**: ç»è¿‡ä»£ç å®¡æŸ¥,**æƒé‡æŸ¥çœ‹æ¨¡å—åŠŸèƒ½å®Œæ•´ä¸”æ­£å¸¸**

**è¯æ®**:

1. **APIç«¯å®Œæ•´å®ç°** (`api/fusion-weights.py`):
   ```python
   class handler(BaseHTTPRequestHandler):
       def do_GET(self):
           """è·å–å½“å‰æƒé‡"""
           ml_weight, spiritual_weight = calculator.get_weights()
           stats = calculator.get_stats()
           # è¿”å›æƒé‡ä¿¡æ¯
   ```

2. **å‰ç«¯é›†æˆå®Œæ•´** (`public/index.html:558-587`):
   ```javascript
   async function checkWeights() {
       var resp = await fetch('/api/fusion-weights');
       var data = await resp.json();
       if (data.status === 'success') {
           // æ˜¾ç¤ºæƒé‡ä¿¡æ¯
           result.innerHTML = ...
       }
   }
   ```

3. **å‰ç«¯æŒ‰é’®å­˜åœ¨** (`index.html:259`):
   ```html
   <button class="btn btn-primary" onclick="checkWeights()">ğŸ“Š æŸ¥çœ‹æƒé‡</button>
   ```

**å¯èƒ½çš„é—®é¢˜**:
1. APIè·¯å¾„é…ç½®é—®é¢˜(Vercelè·¯ç”±)
2. å‰ç«¯é¡µé¢CSSéšè—äº†æŒ‰é’®
3. JavaScripté”™è¯¯å¯¼è‡´å‡½æ•°æœªç»‘å®š

#### éªŒè¯æ­¥éª¤

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. æ£€æŸ¥æ˜¯å¦æœ‰JavaScripté”™è¯¯
3. æ‰‹åŠ¨è°ƒç”¨: `checkWeights()`
4. æ£€æŸ¥ç½‘ç»œè¯·æ±‚: `/api/fusion-weights`

#### è§£å†³æ–¹æ¡ˆ

**å¦‚æœæ˜¯è·¯ç”±é—®é¢˜**:
æ£€æŸ¥`vercel.json`ä¸­æ˜¯å¦åŒ…å«fusion-weightsè·¯ç”±ã€‚

**å¦‚æœæ˜¯å‰ç«¯æ˜¾ç¤ºé—®é¢˜**:
æ£€æŸ¥æŒ‰é’®çš„CSSå’Œå®¹å™¨çš„`display`å±æ€§ã€‚

---

### é—®é¢˜6: æ¨æ–‡å†…å®¹æ„å»º - AIç§‘æ™®å†…å®¹é›†æˆ

#### é—®é¢˜è¡¨ç°
- å½“å‰æ¨æ–‡æ˜¯å›ºå®šæ¨¡æ¿,å†…å®¹å•ä¸€
- æœªå……åˆ†åˆ©ç”¨DeepSeekçš„AIèƒ½åŠ›
- å¸Œæœ›æ¨æ–‡èƒ½ä»‹ç»AIçŸ¥è¯†ç§‘æ™®,ç±»ä¼¼è¯»ä¹¦ç¬”è®°é£æ ¼
- ç”¨æˆ·æœ‰21æœŸagentè¯¾ç¨‹ææ–™éœ€è¦é›†æˆ

#### æ ¹æœ¬åŸå› åˆ†æ

**å½“å‰æ¨æ–‡ç”Ÿæˆç³»ç»Ÿ** (`api/generate-tweet.py`):

**é—®é¢˜ç‚¹**:
1. **å›ºå®šæ¨¡æ¿**: åªæœ‰3ç§é£æ ¼(tech_share, philosophy, casual)
2. **ç®€å•æ›¿æ¢**: åªæ˜¯å­—ç¬¦ä¸²format,æ— æ·±åº¦å†…å®¹
3. **DeepSeekæœªå……åˆ†åˆ©ç”¨**: è™½ç„¶é›†æˆäº†DeepSeek API,ä½†åªç”¨äºç®€å•çš„æ–‡æœ¬ç”Ÿæˆ
4. **æ— çŸ¥è¯†åº“**: æ²¡æœ‰AIç§‘æ™®å†…å®¹åº“

**å½“å‰DeepSeekè°ƒç”¨** (`generate-tweet.py:122-174`):
```python
def generate_with_deepseek(prompt_type: str, data_type: str = 'å¤§ä¹é€',
                           period: int = 260) -> dict:
    prompts = {
        'tech': f'å†™ä¸€æ¡å…³äºç”¨AIåˆ†æ{data_type}æ•°æ®çš„æŠ€æœ¯åˆ†äº«æ¨æ–‡...',
        'philosophy': f'å†™ä¸€æ¡èåˆç¦…æ„çš„AIæŠ€æœ¯æ„Ÿæ‚Ÿæ¨æ–‡...',
        'casual': f'å†™ä¸€æ¡è½»æ¾å¹½é»˜çš„æ¨æ–‡...'
    }
    # ç®€å•è°ƒç”¨DeepSeek
```

**é—®é¢˜**:
- Promptè¿‡äºç®€å•
- æ²¡æœ‰æä¾›AIç§‘æ™®çŸ¥è¯†èƒŒæ™¯
- æ²¡æœ‰è¯»ä¹¦ç¬”è®°é£æ ¼çš„å¼•å¯¼
- æ²¡æœ‰å¼•ç”¨è¯¾ç¨‹ææ–™

#### å®Œæ•´è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆæ¶æ„**: AIç§‘æ™®æ¨æ–‡ç”Ÿæˆç³»ç»Ÿ 2.0

##### 1. åˆ›å»ºAIç§‘æ™®çŸ¥è¯†åº“

**ç›®å½•ç»“æ„**:
```
/api/ai_knowledge/
â”œâ”€â”€ agent_basics.json          # AgentåŸºç¡€çŸ¥è¯†
â”œâ”€â”€ agent_course_21_lessons.json  # 21æœŸè¯¾ç¨‹ææ–™
â”œâ”€â”€ ml_concepts.json           # MLæ¦‚å¿µ
â””â”€â”€ prompt_engineering.json    # Promptå·¥ç¨‹
```

**æ•°æ®æ ¼å¼ç¤ºä¾‹**:
```json
{
  "lesson_01": {
    "title": "ä»€ä¹ˆæ˜¯AI Agent",
    "summary": "Agentæ˜¯å…·æœ‰è‡ªä¸»æ€§ã€ååº”æ€§ã€ä¸»åŠ¨æ€§å’Œç¤¾ä¼šæ€§çš„æ™ºèƒ½ä½“...",
    "key_points": ["è‡ªä¸»æ€§", "ç›®æ ‡å¯¼å‘", "ç¯å¢ƒæ„ŸçŸ¥"],
    "example": "å°±åƒAlphaGoåœ¨å›´æ£‹å¯¹å±€ä¸­è‡ªä¸»å†³ç­–..."
  }
}
```

##### 2. é‡æ–°è®¾è®¡æ¨æ–‡ç”ŸæˆAPI

**æ–°æ–‡ä»¶**: `api/generate-ai-tweet.py`

**æ ¸å¿ƒåŠŸèƒ½**:
1. **åŠ¨æ€é€‰æ‹©çŸ¥è¯†ç‚¹**: ä»21æœŸè¯¾ç¨‹ä¸­éšæœºæˆ–æŒ‰é¡ºåºé€‰æ‹©
2. **æ„å»ºæ·±åº¦Prompt**:
   ```python
   prompt = f"""
   ä½ æ˜¯ä¸€ä½AIç§‘æ™®ä½œè€…,æ­£åœ¨å†™ä¸€ç¯‡è¯»ä¹¦ç¬”è®°é£æ ¼çš„æ¨æ–‡ã€‚

   ã€èƒŒæ™¯ã€‘
   - ä¸»é¢˜: AI Agent - {lesson['title']}
   - æ ¸å¿ƒæ¦‚å¿µ: {', '.join(lesson['key_points'])}
   - å®é™…æ¡ˆä¾‹: {lesson['example']}

   ã€ä»»åŠ¡ã€‘
   å†™ä¸€ç¯‡500å­—çš„AIç§‘æ™®æ¨æ–‡,è¦æ±‚:
   1. å¼€å¤´ç”¨å¤§ä¹é€æ•°æ®åˆ†æä½œä¸ºå¼•å…¥(ç¬¬{period}æœŸæ•°æ®)
   2. å¼•å‡ºAI Agentçš„æ ¸å¿ƒæ¦‚å¿µ:{lesson['summary']}
   3. ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€è§£é‡Šå…³é”®ç‚¹
   4. ç»“å°¾å›åˆ°å¤§ä¹é€é¢„æµ‹,è¯´æ˜AIçš„å±€é™æ€§
   5. é£æ ¼:è¯»ä¹¦ç¬”è®°,æ·±å…¥æµ…å‡º,æœ‰è¶£æœ‰æ–™

   ã€æ ¼å¼ã€‘
   æ ‡é¢˜: ğŸ¤– [å¸å¼•äººçš„æ ‡é¢˜]
   æ­£æ–‡: [åˆ†æ®µæ¸…æ™°,åŒ…å«emoji]
   ç»“å°¾: âš ï¸ æŠ€æœ¯å­¦ä¹ ,ç†æ€§å¨±ä¹
   ```

3. **è°ƒç”¨DeepSeekç”Ÿæˆ**: ä½¿ç”¨ä¸Šè¿°å¤æ‚prompt
4. **åå¤„ç†**: å®‰å…¨åŒ–ã€æ ¼å¼åŒ–ã€æ·»åŠ æ ‡ç­¾

##### 3. è¯¾ç¨‹ææ–™å­˜å‚¨æ–¹æ¡ˆ

**é€‰é¡¹A: JSONæ–‡ä»¶** (æ¨è - ç®€å•å¿«é€Ÿ)
- åˆ›å»º`/api/ai_knowledge/agent_course_21_lessons.json`
- æ‰‹åŠ¨æ•´ç†21æœŸè¯¾ç¨‹ææ–™
- APIç›´æ¥è¯»å–

**é€‰é¡¹B: è…¾è®¯äº‘COS**
- ä¸Šä¼ è¯¾ç¨‹ææ–™åˆ°COS
- APIä»COSåŠ¨æ€åŠ è½½
- ä¾¿äºæ›´æ–°å’Œç®¡ç†

**é€‰é¡¹C: åµŒå…¥å‘é‡æ£€ç´¢** (é«˜çº§)
- å°†21æœŸè¯¾ç¨‹è½¬æ¢ä¸ºå‘é‡
- æ ¹æ®æ¨æ–‡ä¸»é¢˜ç›¸ä¼¼åº¦æ£€ç´¢ç›¸å…³å†…å®¹
- æ›´æ™ºèƒ½çš„å†…å®¹åŒ¹é…

##### 4. æ¨æ–‡ç”Ÿæˆæµç¨‹

```
ç”¨æˆ·è¯·æ±‚ç”Ÿæˆæ¨æ–‡
    â†“
è·å–æœ€æ–°æœŸå·(å¦‚26010æœŸ)
    â†“
éšæœºé€‰æ‹©ä¸€æœŸè¯¾ç¨‹(å¦‚ç¬¬5æœŸ: Agentçš„ååº”æ€§)
    â†“
è·å–è¯¥æœŸçš„æ ¸å¿ƒçŸ¥è¯†ç‚¹å’Œæ¡ˆä¾‹
    â†“
æ„å»ºæ·±åº¦Prompt(åŒ…å«æœŸå·ã€çŸ¥è¯†ç‚¹ã€æ¡ˆä¾‹)
    â†“
è°ƒç”¨DeepSeek APIç”Ÿæˆ
    â†“
åå¤„ç†(å®‰å…¨åŒ–ã€æ ¼å¼åŒ–)
    â†“
è¿”å›æ¨æ–‡å†…å®¹
```

##### 5. ç¤ºä¾‹è¾“å‡º

```
ğŸ¤– AI Agentçš„"è®¤å‘½"å“²å­¦ - ä»å¤§ä¹é€é¢„æµ‹è¯´èµ·

æœ€è¿‘ç”¨MLæ¨¡å‹åˆ†æäº†26010æœŸå¤§ä¹é€æ•°æ®,4ä¸ªæ¨¡å‹(LSTMã€Transformerã€XGBoostã€RandomForest)éƒ½"è®¤è¾“"äº† - å‡†ç¡®ç‡æ¥è¿‘éšæœºã€‚è¿™è®©æˆ‘æƒ³èµ·Agentè¯¾ç¨‹ç¬¬5æœŸè®²çš„**ååº”æ€§(Reactivity)**ã€‚

ä»€ä¹ˆæ˜¯Agentçš„ååº”æ€§?ç®€å•è¯´,å°±æ˜¯æ™ºèƒ½ä½“èƒ½æ„ŸçŸ¥ç¯å¢ƒå˜åŒ–å¹¶åŠæ—¶åšå‡ºå“åº”ã€‚AlphaGoèƒ½"çœ‹åˆ°"æ£‹ç›˜å˜åŒ–,è‡ªåŠ¨è°ƒæ•´ç­–ç•¥;è‡ªåŠ¨é©¾é©¶èƒ½"å¯Ÿè§‰"è·¯å†µ,å®æ—¶åˆ¹è½¦ã€‚ä½†è¿™ä¸€åˆ‡çš„å‰ææ˜¯:ç¯å¢ƒæœ‰è§„å¾‹å¯å¾ªã€‚

å¤§ä¹é€çš„"ç¯å¢ƒ"æ˜¯ä»€ä¹ˆ?çº¯éšæœºæ•°ã€‚MLæ¨¡å‹ç–¯ç‹‚åˆ†æ300æœŸæ•°æ®,è¯•å›¾æ‰¾åˆ°æ¨¡å¼,ä½†Agentå†èªæ˜,ä¹Ÿæ— æ³•å¯¹"æ— è§„å¾‹"åšå‡ºæœ‰æ•ˆååº”ã€‚è¿™å°±æ˜¯AIçš„è¾¹ç•Œ - ä¸æ˜¯æŠ€æœ¯ä¸è¡Œ,è€Œæ˜¯æœ‰äº›é—®é¢˜æœ¬è´¨ä¸Šä¸å¯è§£ã€‚

æ‰€ä»¥,Agentæ•™ä¼šæˆ‘çš„ç¬¬ä¸€è¯¾:è¯†åˆ«é—®é¢˜çš„æœ¬è´¨ã€‚èƒ½è§£çš„é—®é¢˜,å…¨åŠ›ä»¥èµ´;ä¸èƒ½è§£çš„,ä¼˜é›…åœ°æ‰¿è®¤å±€é™ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å­¦AI - ä¸æ˜¯ä¸ºäº†ä¸‡èƒ½,è€Œæ˜¯ä¸ºäº†æ›´æ¸…é†’åœ°è®¤è¯†ä¸–ç•Œã€‚

ğŸ“š æ¨èé˜…è¯»: ã€ŠAI Agentè®¾è®¡æ¨¡å¼ã€‹ç¬¬5ç«  - ååº”å¼æ¶æ„
ğŸ¯ å®æˆ˜é¡¹ç›®: [GitHubé“¾æ¥] å¤§ä¹é€MLå®éªŒ(å«ä»£ç )

âš ï¸ æœ¬æ–‡ä¸ºAIæŠ€æœ¯å­¦ä¹ ç¬”è®°,ä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚å½©ç¥¨æ˜¯éšæœºäº‹ä»¶,ç†æ€§å¨±ä¹!

#AIç§‘æ™® #Agent #æœºå™¨å­¦ä¹  #è¯»ä¹¦ç¬”è®°
```

---

## ğŸ› ï¸ ç»¼åˆè§£å†³æ–¹æ¡ˆ

### ä¼˜å…ˆçº§1: æ•°æ®æŒä¹…åŒ–æ¶æ„é‡æ„ (è§£å†³é—®é¢˜1ã€2ã€4)

**ç›®æ ‡**: ç¡®ä¿æ•°æ®åœ¨Serverlessç¯å¢ƒä¸‹æŒä¹…åŒ–

**å®æ–½æ­¥éª¤**:

1. **ä¿®æ”¹æ•°æ®åŠ è½½é€»è¾‘** (`api/utils/_data_loader.py`):
   ```python
   def get_combined_lottery_data() -> List[Dict[str, Any]]:
       """ä¼˜å…ˆçº§: COS > æœ¬åœ°ç”¨æˆ·æ•°æ® > å›ºå®šæ•°æ®"""
       combined = []

       # 1. å°è¯•ä»COSåŠ è½½(æœ€æ–°ä¸”æŒä¹…åŒ–çš„æ•°æ®)
       try:
           from utils._cos_data_loader import get_lottery_data
           cos_data = get_lottery_data()
           if cos_data and len(cos_data) > 0:
               return cos_data
       except:
           pass

       # 2. åŠ è½½æœ¬åœ°ç”¨æˆ·æ•°æ®(å¯èƒ½å­˜åœ¨äº/tmp)
       user_data = load_user_data()

       # 3. åŠ è½½å›ºå®šæ•°æ®
       from utils._lottery_data import lottery_data

       # åˆå¹¶
       combined = user_data + lottery_data
       return combined
   ```

2. **ä¿®æ”¹æ•°æ®ä¿å­˜é€»è¾‘** (`api/admin-data.py`):
   ```python
   # æ·»åŠ æ•°æ®å,å¼ºåˆ¶åŒæ­¥åˆ°COS
   if save_user_data(user_data):
       # ç«‹å³ä¸Šä¼ åˆ°COS
       combined_data = get_combined_lottery_data()
       upload_to_cos(combined_data)
   ```

3. **æ·»åŠ ç¯å¢ƒå˜é‡æ£€æŸ¥**:
   - åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­é…ç½®è…¾è®¯äº‘COSå‡­è¯
   - æ·»åŠ å¯åŠ¨æ—¶æ£€æŸ¥è„šæœ¬

### ä¼˜å…ˆçº§2: æ¨æ–‡ç”Ÿæˆç³»ç»Ÿå‡çº§ (è§£å†³é—®é¢˜3ã€6)

**å®æ–½æ­¥éª¤**:

1. **åˆ›å»ºAIçŸ¥è¯†åº“ç›®å½•**:
   ```bash
   mkdir -p api/ai_knowledge
   ```

2. **æ•´ç†21æœŸè¯¾ç¨‹ææ–™**:
   - åˆ›å»º`api/ai_knowledge/agent_course_21_lessons.json`
   - æ ¼å¼åŒ–è¯¾ç¨‹å†…å®¹

3. **åˆ›å»ºæ–°æ¨æ–‡ç”ŸæˆAPI** (`api/generate-ai-tweet.py`):
   - é›†æˆè¯¾ç¨‹çŸ¥è¯†åº“
   - å®ç°æ·±åº¦Promptæ„å»º
   - è°ƒç”¨DeepSeekç”Ÿæˆ

4. **ä¿®æ”¹å‰ç«¯è°ƒç”¨**:
   - æ›´æ–°æ¨æ–‡ç”ŸæˆæŒ‰é’®çš„APIè·¯å¾„
   - è‡ªåŠ¨è·å–æœ€æ–°æœŸå·

### ä¼˜å…ˆçº§3: æƒé‡æŸ¥çœ‹æ¨¡å—éªŒè¯ (è§£å†³é—®é¢˜5)

**éªŒè¯æ­¥éª¤**:

1. æµ‹è¯•APIç«¯ç‚¹: `curl /api/fusion-weights`
2. æ£€æŸ¥Vercelè·¯ç”±é…ç½®
3. å‰ç«¯è°ƒè¯•checkWeights()å‡½æ•°

---

## ğŸ“ è¯¦ç»†å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µ: æ•°æ®æŒä¹…åŒ–ä¿®å¤ (1-2å¤©)

**Day 1 ä¸Šåˆ**:
- [ ] æ£€æŸ¥Vercelç¯å¢ƒå˜é‡é…ç½®
- [ ] æµ‹è¯•COSè¿æ¥æ€§
- [ ] ä¿®æ”¹`_data_loader.py`æ•°æ®åŠ è½½ä¼˜å…ˆçº§

**Day 1 ä¸‹åˆ**:
- [ ] ä¿®æ”¹`admin-data.py`æ•°æ®ä¿å­˜é€»è¾‘
- [ ] æµ‹è¯•åå°æ·»åŠ æ•°æ®æµç¨‹
- [ ] éªŒè¯æ•°æ®æ˜¯å¦æŒä¹…åŒ–åˆ°COS

**Day 2**:
- [ ] ä¼˜åŒ–COSä¸Šä¼ å¤±è´¥é‡è¯•æœºåˆ¶
- [ ] æ·»åŠ æ•°æ®åŒæ­¥æ—¥å¿—
- [ ] å…¨é¢æµ‹è¯•æ•°æ®CRUDæ“ä½œ

### ç¬¬äºŒé˜¶æ®µ: æ¨æ–‡ç”Ÿæˆç³»ç»Ÿå‡çº§ (2-3å¤©)

**Day 3**:
- [ ] åˆ›å»ºAIçŸ¥è¯†åº“ç›®å½•ç»“æ„
- [ ] æ•´ç†21æœŸagentè¯¾ç¨‹ææ–™
- [ ] åˆ›å»ºJSONæ ¼å¼çš„çŸ¥è¯†åº“æ–‡ä»¶

**Day 4**:
- [ ] å®ç°`generate-ai-tweet.py` API
- [ ] ç¼–å†™æ·±åº¦Promptæ¨¡æ¿
- [ ] é›†æˆDeepSeek APIè°ƒç”¨

**Day 5**:
- [ ] å‰ç«¯é›†æˆæ–°æ¨æ–‡ç”ŸæˆAPI
- [ ] å®ç°æœŸå·è‡ªåŠ¨è·å–
- [ ] æµ‹è¯•æ¨æ–‡ç”Ÿæˆæ•ˆæœ

### ç¬¬ä¸‰é˜¶æ®µ: æµ‹è¯•ä¸éƒ¨ç½² (1å¤©)

**Day 6**:
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- [ ] ä¿®å¤å‘ç°çš„bug
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] ç›‘æ§è¿è¡ŒçŠ¶æ€

---

## ğŸ¯ é¢„æœŸæˆæœ

### åŠŸèƒ½æˆæœ

1. âœ… **æ•°æ®æŒä¹…åŒ–**: ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ çš„æ•°æ®ä¸ä¼šä¸¢å¤±
2. âœ… **å®æ—¶æ•°æ®æº**: MLæ¨¡å‹ä½¿ç”¨æœ€æ–°çš„å¼€å¥–æ•°æ®è®­ç»ƒ
3. âœ… **è‡ªåŠ¨æœŸå·**: æ¨æ–‡è‡ªåŠ¨æ˜¾ç¤ºä¸‹ä¸€æœŸæœŸå·
4. âœ… **AIç§‘æ™®æ¨æ–‡**: æ¯æœŸæ¨æ–‡éƒ½åŒ…å«æ·±åº¦çš„AIçŸ¥è¯†ç§‘æ™®
5. âœ… **è¯»ä¹¦ç¬”è®°é£æ ¼**: æ¨æ–‡è´¨é‡å¤§å¹…æå‡,æœ‰æ·±åº¦æœ‰è¶£å‘³

### æŠ€æœ¯æˆæœ

1. âœ… **å¥å£®çš„æ•°æ®æ¶æ„**: COSä½œä¸ºä¸»è¦æ•°æ®æº
2. âœ… **æ™ºèƒ½æ¨æ–‡ç”Ÿæˆ**: DeepSeek + çŸ¥è¯†åº“çš„æ·±åº¦é›†æˆ
3. âœ… **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°çš„è¯¾ç¨‹ææ–™
4. âœ… **ç”¨æˆ·ä½“éªŒ**: å‰åç«¯æ•°æ®åŒæ­¥,å®æ—¶æ›´æ–°

---

## ğŸ“Š é£é™©è¯„ä¼°

| é£é™©é¡¹ | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|--------|------|------|----------|
| COSç¯å¢ƒå˜é‡æœªé…ç½® | é«˜ | ä¸­ | æä¾›è¯¦ç»†é…ç½®æ–‡æ¡£ |
| DeepSeek APIé™é¢ | ä¸­ | ä½ | æ·»åŠ æœ¬åœ°æ¨¡æ¿å›é€€ |
| çŸ¥è¯†åº“æ•´ç†è€—æ—¶ | ä½ | é«˜ | åˆ†æ‰¹æ¬¡æ·»åŠ è¯¾ç¨‹ææ–™ |
| Vercelå†·å¯åŠ¨å»¶è¿Ÿ | ä¸­ | ä¸­ | å®ç°ç¼“å­˜æœºåˆ¶ |

---

## ğŸ“š é™„å½•

### A. å…³é”®æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ | éœ€è¦ä¿®æ”¹ |
|----------|------|----------|
| `api/utils/_data_loader.py` | æ•°æ®åŠ è½½ | âœ… æ˜¯ |
| `api/admin-data.py` | åå°ç®¡ç† | âœ… æ˜¯ |
| `api/generate-tweet.py` | æ¨æ–‡ç”Ÿæˆ(æ—§) | â¸ï¸ ä¿ç•™ |
| `api/generate-ai-tweet.py` | æ¨æ–‡ç”Ÿæˆ(æ–°) | âœ… æ–°å»º |
| `api/ai_knowledge/*` | AIçŸ¥è¯†åº“ | âœ… æ–°å»º |
| `api/fusion-weights.py` | æƒé‡ç®¡ç† | âŒ å¦ |
| `public/index.html` | å‰ç«¯é¡µé¢ | âœ… æ˜¯ |

### B. ç¯å¢ƒå˜é‡æ¸…å•

```bash
# è…¾è®¯äº‘COSé…ç½®(å¿…éœ€)
TENCENT_SECRET_ID=your_secret_id
TENCENT_SECRET_KEY=your_secret_key
TENCENT_COS_BUCKET=your_bucket_name
TENCENT_COS_REGION=ap-guangzhou

# DeepSeek APIé…ç½®(å¿…éœ€)
DEEPSEEK_API_KEY=your_deepseek_api_key

# Vercel KVé…ç½®(å¯é€‰)
KV_REST_API_URL=your_kv_url
KV_REST_API_TOKEN=your_kv_token
```

### C. è¯¾ç¨‹ææ–™æ•´ç†æ¨¡æ¿

```json
{
  "course_metadata": {
    "title": "AI Agent 21æœŸç³»åˆ—è¯¾ç¨‹",
    "total_lessons": 21,
    "difficulty": "ä¸­çº§",
    "target_audience": "AIå­¦ä¹ è€…"
  },
  "lessons": [
    {
      "lesson_number": 1,
      "title": "ä»€ä¹ˆæ˜¯AI Agent",
      "summary": "Agentæ˜¯...",
      "key_points": ["è‡ªä¸»æ€§", "ååº”æ€§", "ä¸»åŠ¨æ€§"],
      "example": "AlphaGoæ¡ˆä¾‹...",
      "reading_time": "5åˆ†é’Ÿ",
      "references": ["é“¾æ¥1", "é“¾æ¥2"]
    }
    // ... å…±21æœŸ
  ]
}
```

---

## âœ… è¡ŒåŠ¨æ£€æŸ¥æ¸…å•

### ç«‹å³æ‰§è¡Œ
- [ ] æ£€æŸ¥Vercelç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®
- [ ] æµ‹è¯•COSè¿æ¥: `python utils/tencent_cos.py`
- [ ] å¤‡ä»½å½“å‰ä»£ç : `git commit -m "backup before refactor"`

### æœ¬å‘¨å®Œæˆ
- [ ] ä¿®å¤æ•°æ®æŒä¹…åŒ–é—®é¢˜
- [ ] æµ‹è¯•åå°æ·»åŠ æ•°æ®æµç¨‹
- [ ] å¼€å§‹æ•´ç†AIè¯¾ç¨‹ææ–™

### ä¸‹å‘¨å®Œæˆ
- [ ] å®ç°æ–°æ¨æ–‡ç”ŸæˆAPI
- [ ] å‰ç«¯é›†æˆAIç§‘æ™®æ¨æ–‡
- [ ] å…¨é¢æµ‹è¯•å¹¶éƒ¨ç½²

---

**æŠ¥å‘Šç»“æŸ**

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦æ¾„æ¸…çš„åœ°æ–¹,è¯·éšæ—¶æå‡ºã€‚æˆ‘å·²å‡†å¤‡å¥½å¼€å§‹å®æ–½è¿™äº›è§£å†³æ–¹æ¡ˆã€‚

---
*ç”Ÿæˆæ—¶é—´: 2026-01-25*
*ä½œè€…: Claude Agent*
*ç‰ˆæœ¬: v1.0*
